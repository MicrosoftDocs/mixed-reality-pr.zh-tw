---
title: 座標系統
description: 用來建立內建、站上、房間規模和世界規模混合現實體驗的空間座標系統。
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
keywords: 座標系統、空間座標系統、僅限方向、固定規模、固定規模、會議室規模、全球規模、360度、站上、位置、空間、固定、已連結、階段、錨定、空間錨點、全球鎖定、全球鎖定、內容錨點、全球鎖定、全球鎖定、內建、共用、追蹤遺失、雲端空間錨點
ms.openlocfilehash: bf7641d13302620a32aac260332c3be694ea324b
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/03/2020
ms.locfileid: "91680501"
---
# <a name="coordinate-systems"></a>座標系統

在其核心中，混合現實應用程式 [會在您的世界中放置](../discover/hologram.md) 全像真實物件一樣的音效。 這牽涉到在世界各地對使用者有意義的地理位置進行精確定位和定位，無論是世界的實體室或是您所建立的虛擬領域。 當您的全像投影的位置和方向，或任何其他幾何（例如 [注視](gaze-and-commit.md) 光線或 [手位置](hands-and-tools.md)）時，Windows 會提供各種真實全局座標系統，讓您可以表達幾何，也稱為 **空間座標系統** 。

<br>

<iframe width="940" height="530" src="https://www.youtube.com/embed/TneGSeqVAXQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## <a name="device-support"></a>裝置支援

<table>
    <colgroup>
    <col width="40%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    </colgroup>
    <tr>
        <td><strong>功能</strong></td>
        <td><a href="https://docs.microsoft.com/hololens/hololens1-hardware"><strong>HoloLens (第 1 代)</strong></a></td>
        <td><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></td>
        <td><a href="https://docs.microsoft.com/windows/mixed-reality/immersive-headset-hardware-details"><strong>沉浸式頭戴裝置</strong></a></td>
    </tr>
     <tr>
        <td><a href="coordinate-systems.md#stationary-frame-of-reference">固定的參考框架</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#attached-frame-of-reference">附加的參考框架</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#stage-frame-of-reference">參考的階段框架</a></td>
        <td>尚不支援</td>
        <td>尚不支援</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#spatial-anchors">空間錨點</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="spatial-mapping.md">空間對應</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>❌</td>
    </tr>
    <tr>
        <td><a href="scene-understanding.md">場景理解</a></td>
        <td>❌</td>
        <td>✔️</td>
        <td>❌</td>
    </tr>
</table>

## <a name="mixed-reality-experience-scales"></a>混合現實體驗規模調整

混合的現實應用程式可設計為各式各樣的使用者體驗，從只需要耳機方向的360度影片檢視器，到完全世界規模的應用程式和遊戲，需要空間對應和空間錨點：
<br>

| 體驗規模 | 需求 | 範例體驗 | 
|----------|----------|----------|
|  **僅限方向** |  **耳機方向** (引力對齊的)  |  360°影片檢視器 | 
|  **固定規模** |  上方，加上 **耳機位置** （相對於零位置） |  賽車遊戲或空間模擬器 | 
|  **長期調整** |  以上和 **階段樓層來源** |  您已備妥和淡出的行動遊戲  | 
|  **會議室規模** |  上方和 **階段界限多邊形** |  您逐步解說謎題的拼圖遊戲 | 
|  **全球規模** |  **空間錨點** (，通常是 [空間對應](spatial-mapping.md))  |  敵人來自您真實牆的遊戲，例如 [RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j) | 

這些經驗調整會遵循「嵌套玩偶」模型。 此處 Windows Mixed Reality 的主要設計原則，是指定的耳機支援以目標體驗規模和所有較低的規模來建立的應用程式：
<br>

| 6DOF 追蹤 | 已定義樓層 | 360°追蹤 | 已定義界限 | 空間錨點 | 最大體驗 | 
|----------|----------|----------|----------|----------|----------|
|  否 |  - |  - |  - |  - |  **僅限方向** | 
|  **是** |  否 |  - |  - |  - |  **坐** | 
|  **是** |  **是** |  否 |  - |  - |  **長期向前** | 
|  **是** |  **是** |  **是** |  否 |  - |  **長期-360 °** | 
|  **是** |  **是** |  **是** |  **是** |  否 |  **房間** | 
|  **是** |  **是** |  **是** |  **是** |  **是** |  **世界** | 

請注意，HoloLens 尚未支援參考的階段框架。 HoloLens 上的房間規模應用程式目前需要使用 [空間對應](spatial-mapping.md) 或 [場景理解](scene-understanding.md) ，以找出使用者的樓層和牆。

## <a name="spatial-coordinate-systems"></a>空間座標系統

所有3D 圖形應用程式都會使用 [笛卡兒座標系統](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems) 來表示其所轉譯之虛擬世界中物件的位置和方向。 這類座標系統會建立3個垂直軸，以放置物件： X、Y 和 Z 軸。

在 [混合的現實](../discover/mixed-reality.md)情況下，您的應用程式會導致虛擬和實體座標系統的原因。 Windows 呼叫的座標系統在實體世界中具有真正意義的 **空間座標系統** 。

空間座標系統表示其座標值（以量值為單位）。 這表示，在混合現實中轉譯時，物件會在 X、Y 或 Z 軸之間分開顯示2個度量。 這可讓您輕鬆地以真實世界的規模呈現物件和環境。

一般來說，笛卡兒座標系統可以是右手或左手。 Windows 上的空間座標系統一律是右手的，這表示正 X 軸朝右，右 Y 軸會向上 (對齊引力) ，而正 Z 軸會指向您。

在這兩種座標系統中，正 X 軸指向右邊，Y 軸則會向上點。 不同之處在于正面 Z 軸是否朝向您的距離。 您可以記住，正 Z 軸指向的方向是指向正 X 方向的手指，然後將它們 curling 為正 Y 方向。 您的拇指點方向（朝向或遠離您的方向）是該座標系統的正 Z 軸點方向。

## <a name="building-an-orientation-only-or-seated-scale-experience"></a>打造僅限方向或內部規模的體驗

「全像」轉譯的 [關鍵是在](../develop/platform-capabilities-and-apis/rendering.md) 使用者四處移動時，變更應用程式的每個畫面格的影像，以符合其預測的 head 動作。 您可以使用 **固定的參考框架** ，建立符合使用者頭部定位和前端方向變更的內部 **規模體驗** 。

有些內容必須忽略標頭位置的更新，並隨時保持固定在所選的標題，以及與使用者之間的距離。 主要範例是360度的影片：由於影片是從單一固定的觀點來捕捉的，所以即使視圖方向必須隨著使用者的外觀改變，還是會損毀讓視圖位置相對於內容的假像。 您可以使用 **附加的參考框架** 來建立 **僅限方向的體驗** 。

### <a name="stationary-frame-of-reference"></a>固定的參考框架

靜止的參考框架所提供的座標系統，會盡可能將物件的位置保持在相對於全球的最穩定狀態，同時遵守使用者的標頭位置變更。

若為遊戲引擎（例如 [Unity](https://unity3d.com/)）中的內部規模體驗，固定的參考框架會定義引擎的「世界原點」。 放在特定全局座標的物件會使用參考的靜止框架，在真實世界中使用這些相同的座標來定義其位置。 即使在使用者四處解說的情況下，仍在世界各地的內容，也稱為 **全球鎖定** 的內容。

應用程式通常會在啟動時建立一個靜止的參考框架，並在整個應用程式的存留期內使用其座標系統。 作為 Unity 中的應用程式開發人員，您可以直接開始放置相對於來源的內容，這會是使用者的初始頭部位置和方向。 如果使用者移至新的位置，並想要繼續其內部規模的體驗，您可以在該位置 recenter 世界原點。

經過一段時間之後，當系統深入瞭解使用者的環境時，它可能會判斷真實世界中不同點之間的距離，比系統先前所認為的還要短或更長。 如果您在 HoloLens 上轉譯應用程式的靜止框架，而使用者穿梭超過5計量範圍的範圍，則您的應用程式可能會在觀察到的全像全像地區之間觀察到漂移。 如果您的體驗讓使用者 wandering 超過5個計量，您就會建立 [全球規模的體驗](#building-a-world-scale-experience)，這將需要額外的技術來維持全像，如下所述。

### <a name="attached-frame-of-reference"></a>附加的參考框架

當應用程式第一次建立框架時，連結的參考框架會隨著使用者四處移動，並提供固定的標題。 這可讓使用者輕鬆地查看位於該參考框架內的內容。 以這種使用者相關的方式轉譯的內容稱為「 **主體鎖定** 內容」。

當耳機無法找出世界中的位置時，連結的參考框架會提供唯一的座標系統，可用來呈現全像全像。 這非常適合顯示回溯 UI，讓使用者知道他們的裝置無法在世界中找到它們。 已上延展或更高的應用程式應該包含僅限方向的回復，以協助使用者再次開始使用與 [混合現實首頁](../discover/navigating-the-windows-mixed-reality-home.md)中所顯示的 UI 類似的 UI。

## <a name="building-a-standing-scale-or-room-scale-experience"></a>打造大規模或房間規模的體驗

若要超越在沉浸式耳機上的放大規模並打造 **大規模的體驗** ，您可以使用階段式 **的參考框架** 。

若要提供 **會議室規模的體驗** ，讓使用者在其預先定義的5計量界限內四處討論，您也可以檢查 **階段界限** 。

### <a name="stage-frame-of-reference"></a>參考的階段框架

當您第一次設定沉浸式耳機時，使用者會定義一個 **階段** ，代表他們將遇到混合現實的空間。 階段會以最少的方式定義 **階段原點** ，這是一個空間座標系統，在使用者選擇的樓層位置，以及要使用裝置的前進方向。 藉由將內容放在 Y = 0 樓層平面的這個階段座標系統中，您可以確保您的全像是在使用者的地面上輕鬆地出現，並為使用者提供 **大規模的體驗** 。

### <a name="stage-bounds"></a>階段界限

使用者也可以選擇性地定義 **階段界限** ，也就是他們已清除傢俱的區域，他們想要在混合現實中四處移動。 如果是，應用程式可以使用這些界限來建立 **房間規模的體驗** ，以確保所有的全像影像都一律放在使用者可以觸及的位置。

由於參考的階段框架提供單一固定座標系統，以放置樓層相關內容，因此是移植針對虛擬實境耳機所開發之大規模和會議室規模應用程式的最簡單途徑。 不過，就像這些 VR 平臺一樣，單一座標系統只能在大約5個計量 (16 英尺) 直徑的最穩定內容，然後拉杆 arm 效果會導致在系統調整的情況下，將內容從中心移到最顯著的方向。 若要超越5個計量，則需要空間錨點。

## <a name="building-a-world-scale-experience"></a>打造全球規模的體驗

HoloLens 可提供真正的 **全球規模體驗** ，讓使用者穿梭超過5個計量。 若要打造全球規模的應用程式，您需要新的技術，而不是用於房間規模的體驗。

### <a name="why-a-single-rigid-coordinate-system-cannot-be-used-beyond-5-meters"></a>為何單一固定座標系統無法使用超過5個計量

現在，在撰寫遊戲、資料視覺效果應用程式或虛擬實境應用程式時，一般的方法是建立一個絕對全局座標系統，讓所有其他座標都能可靠地對應回。 在該環境中，您一律可以尋找穩定的轉換，以定義該世界中任何兩個物件之間的關聯性。 如果您未移動這些物件，其相對轉換一律會維持不變。 這種全域座標系統在轉譯單純的虛擬世界（您事先知道所有幾何）時非常好用。 現今的房間規模的 VR 應用程式通常會建立這種絕對房間縮放座標系統及其原點。

相反地，非網路共用的混合現實裝置（例如 HoloLens）對世界有動態的感應器驅動理解，會持續調整使用者周圍環境的知識，因為它們會在整個建築樓層中逐步進行許多計量。 在全球規模的體驗中，如果您將所有的全像放在單一固定座標系統中，則這些全像世界或彼此之間的全像投影都一定會漂移。

例如，耳機目前可能會認為世界上有兩個位置彼此之間有4個度量，然後在稍後調整該瞭解，並瞭解這些位置其實是3.9 計量。 如果這些全息片一開始在單一固定座標系統中放置4個計量，則其中一個會從真實世界一直顯示0.1 計量。

### <a name="spatial-anchors"></a>空間錨點

Windows Mixed Reality 解決上一節所述的問題，可讓您建立 [空間錨點](spatial-anchors.md) ，以標記使用者在世界上放置全像的重要點。 空間錨點代表系統在一段時間中應該於真實世界中追蹤的一個重要時間點。

當裝置學習到世界時，這些空間錨點可以視需要調整其相對位置，以確保每個錨點都能精確地保持相對於真實世界的位置。 藉由將空間錨點放在使用者放置全像空間錨點的位置，然後將它放在相對於其空間錨點的位置上，您可以確保全像使用者在數十個計量上漫遊時，全像是在使用者漫遊的時候維持最理想的穩定性

相對於另一個空間錨點的這項持續調整是座標系統與空間錨點和固定框架參考之間的主要差異：

* 放在參考的靜止框架中的全像投影會彼此保持固定的關聯性。 不過，當使用者逐步進行較長的距離時，該框架的座標系統可能會相對於世界，以確保使用者旁的全像是穩定的。

* 放置於參考階段框架中的全息部，也會保留彼此的固定關聯性。 相對於固定框架，階段框架一律會保持固定的位置，相對於其定義的實體原點。 不過，在階段座標系統中轉譯的內容超過其5計量界限的內容，只會在使用者位於該界限內時，才會顯示穩定。

* 使用一個空間錨點放置的全像影像，可能會與使用另一個空間錨點的全像投影相關。 這可讓 Windows 改善對每個空間錨點位置的瞭解，即使某個錨點需要自行調整，而另一個錨點需要向右調整也是一樣。

相對於固定的參考框架，其一律會針對接近使用者的穩定性進行優化，參考和空間錨點的階段框架可確保其來源的穩定性。 這可協助這些全像一段時間的全像投影一樣，但這也表示從其座標系統的原點呈現的全像是太遠的空間，將會遇到越來越多的嚴重杠杆-arm 效果。 這是因為對於階段或錨點的位置和方向進行小調整，會隨著距離錨點的距離而放大。 

理想的經驗法則是確保您根據距離空間錨點座標系統所轉譯的任何事物，都在其原點的3個計量範圍內。 針對附近的階段原點，轉譯遠距內容是正常的，因為任何增加的位置錯誤將只會影響不會在使用者觀點中移動的小型全像影像。

### <a name="spatial-anchor-persistence"></a>空間錨點持續性

空間錨點也可讓您的應用程式在您的應用程式暫停或裝置關閉之後，記住重要的位置。

您可以將應用程式所建立的空間錨點儲存到磁片，然後稍後再將它們保存到應用程式的 **空間錨點存放區** ，以便稍後再重新載入。 儲存或載入錨點時，您會提供對應用程式有意義的字串金鑰，以便稍後識別錨點。 請將此金鑰視為錨點的檔案名。 如果您想要將其他資料與該錨點產生關聯，例如使用者放在該位置的3D 模型，請將其儲存至您應用程式的本機儲存體，並將它與您選擇的金鑰建立關聯。

藉由將錨點保存到存放區，您的使用者可以將個別的全像是放置在一起，或放置一個工作區，讓應用程式用來放置其各種不同的全像影像，然後在您的應用程式的許多用途之後，于預期的位置找到

您也可以使用<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a> 跨 HoloLens、iOS 和 Android 裝置取得非同步全像投影持久性。  藉由共用持久的雲端空間錨點，多個裝置就能觀察相同的已保存全像投影一段時間，即使那些裝置並未同時存在。

### <a name="spatial-anchor-sharing"></a>空間錨點共用

您的應用程式也可以與其他裝置即時共用空間錨點，以允許即時共用體驗。

藉由使用 <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間錨點</a>，您的應用程式可以跨多個 HoloLens、IOS 和 Android 裝置共用空間錨點。 透過讓每個裝置使用同一個空間錨點轉譯全像投影，所有使用者將會看到全像投影出現在真實世界中的相同位置。

## <a name="avoid-head-locked-content"></a>避免標頭鎖定的內容

我們強烈建議您不要轉譯標頭鎖定的內容，這會在顯示 (（例如抬頭顯示器) ）中維持固定位置。 一般情況下，使用者不會覺得標頭鎖定的內容，也不像世界的自然部分。

永遠鎖定的內容通常應取代為連接到使用者或放在世界本身的全像影像。 例如，資料 [指標](cursors.md) 通常應該會推入至世界中，並自然地調整以反映物件在使用者的注視下的位置和距離。

## <a name="handling-tracking-errors"></a>處理追蹤錯誤

在某些環境中（例如深色走廊），耳機可能無法在世界中正確地找到它本身。 如果未正確處理，這可能會導致全像全像，不會顯示或顯示在不正確的位置。 我們現在會討論發生這種情況的情況、其對使用者體驗的影響，以及最能有效處理這種情況的秘訣。

### <a name="headset-cannot-track-due-to-insufficient-sensor-data"></a>耳機無法追蹤，因為感應器資料不足

有時候，耳機的感應器無法找出耳機的位置。 如果房間很暗，或感應器被頭髮或手所涵蓋，或周圍的材質沒有足夠的材質，就可能發生這種情況。

發生這種情況時，耳機將無法以足夠的精確度來追蹤其位置，以呈現世界鎖定的全像。 您將無法找出空間錨點、固定框架或階段框架相對於裝置的位置，但是您仍然可以在附加的參考框架中轉譯主體鎖定的內容。

您的應用程式應該告訴使用者如何取得位置追蹤，以轉譯一些可描述某些秘訣的回溯主體鎖定內容，例如發現感應器並開啟更多燈光。

### <a name="headset-tracks-incorrectly-due-to-dynamic-changes-in-the-environment"></a>由於環境中的動態變更，耳機追蹤不正確

有時候，如果環境中有大量的動態變更，例如許多人在房間內四處進行，裝置就無法正常追蹤。 在此情況下，當裝置嘗試在此動態環境中追蹤自己時，全像移動可能會跳躍或漂移。 如果您遇到這種情況，建議您在較不動態的環境中使用裝置。

### <a name="headset-tracks-incorrectly-because-the-environment-has-changed-significantly-over-time"></a>耳機軌不正確，因為環境在一段時間內大幅改變

有時候，當您在已經歷大量變更的環境中開始使用耳機時 (例如，設備的大量移動、牆 hangings 等 ) ，可能會有某些全息影像可能會從其原始位置中移出。 當使用者在這個新的空間中四處移動時，較舊的全像投影也可以跳到。 這是因為系統對您空間的瞭解不再存在，而且在嘗試協調房間的功能時，它會嘗試重新對應環境。 在此案例中，建議使用者在未出現預期的情況下，將釘選的影像重新放置於世界各地。

### <a name="headset-tracks-incorrectly-due-to-identical-spaces-in-an-environment"></a>因為環境中的空間相同，所以耳機軌跡不正確

有時候，home 或其他空間可能有兩個相同的區域。 例如，兩個相同的會議室、兩個相同的角落區域、兩個完全相同的海報，涵蓋裝置的視圖欄位。 在這種情況下，裝置可能會在相同元件之間取得混淆，並將它們標示為其內部標記法中的相同部分。 這可能會導致某些區域的全像影像出現在其他位置。 裝置可能會開始因為環境的內部表示已損毀而無法經常發生追蹤。 在此情況下，建議您重設系統的環境理解。 請注意，重設地圖會導致所有空間錨點放置遺失。 這會導致耳機在環境的唯一區域中妥善追蹤。 但是，如果裝置在相同的區域之間有混淆，可能會重新發生問題。

## <a name="see-also"></a>另請參閱
* [GDC 2017 呈現空間座標系統和全像攝影轉譯](https://channel9.msdn.com/events/GDC/GDC-2017/GDC2017-008)
* [Unity 中的座標系統](../develop/unity/coordinate-systems-in-unity.md)
* [DirectX 中的座標系統](../develop/native/coordinate-systems-in-directx.md)
* [空間錨點](spatial-anchors.md)
* [混合實境中的共用體驗](../develop/platform-capabilities-and-apis/shared-experiences-in-mixed-reality.md)
* <a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a>
* [案例研究 - 在實境中的的透視技術](../out-of-scope/case-study-looking-through-holes-in-your-reality.md)
