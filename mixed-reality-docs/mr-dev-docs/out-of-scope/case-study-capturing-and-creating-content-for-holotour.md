---
title: 案例研究-HoloTour
description: HoloTour for Microsoft HoloLens 提供全球 iconic 地點的沉浸式3D 個人導覽。 本案例研究將逐步解說如何捕獲和建立用於 HoloTour 的內容。
author: dannyaskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: HoloTour、HoloLens、Windows Mixed Reality
ms.openlocfilehash: 9908327a1b8e70eef73d3f98adb7c75615e8e098
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/03/2020
ms.locfileid: "91679797"
---
# <a name="case-study---holotour"></a><span data-ttu-id="bd482-105">案例研究-HoloTour</span><span class="sxs-lookup"><span data-stu-id="bd482-105">Case study - HoloTour</span></span>

<span data-ttu-id="bd482-106">HoloTour for Microsoft HoloLens 提供全球 iconic 地點的沉浸式3D 個人導覽。</span><span class="sxs-lookup"><span data-stu-id="bd482-106">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="bd482-107">當設計人員、演出者、生產者、音訊設計工具和開發人員參與此專案時，為已知位置建立 convincingly 的實際3D 轉譯，會採用獨特的創意與技術 wizardry 融合。</span><span class="sxs-lookup"><span data-stu-id="bd482-107">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span> <span data-ttu-id="bd482-108">本案例研究將逐步解說如何捕獲和建立用於 HoloTour 的內容。</span><span class="sxs-lookup"><span data-stu-id="bd482-108">This case study will walk through the process of capturing and creating the content used for HoloTour.</span></span>

## <a name="the-tech"></a><span data-ttu-id="bd482-109">技術</span><span class="sxs-lookup"><span data-stu-id="bd482-109">The tech</span></span>

<span data-ttu-id="bd482-110">有了 HoloTour，我們想要讓人們能夠造訪一些全球最棒的目的地，像是在秘魯的 [Machu Picchu 毀損](https://en.wikipedia.org/wiki/Machu_Picchu) 或義大利日 [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) ，直接從他們自己的聊天室。</span><span class="sxs-lookup"><span data-stu-id="bd482-110">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="bd482-111">我們的團隊將其目標 HoloTour 為「讓您覺得您真的在那裡」。</span><span class="sxs-lookup"><span data-stu-id="bd482-111">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="bd482-112">不只是圖片或影片所需的體驗。</span><span class="sxs-lookup"><span data-stu-id="bd482-112">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="bd482-113">利用 HoloLens 的獨特顯示器、追蹤和音訊技術，我們相信我們可以將您傳輸到另一個位置。</span><span class="sxs-lookup"><span data-stu-id="bd482-113">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="bd482-114">我們需要為每個流覽的位置，抓住堪薩斯州、音效和三維幾何，然後在我們的應用程式內重新建立。</span><span class="sxs-lookup"><span data-stu-id="bd482-114">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="bd482-115">為了達到此目的，我們需要一個具有方向性音訊捕捉的360°攝影機設備。</span><span class="sxs-lookup"><span data-stu-id="bd482-115">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="bd482-116">它需要以極高的解析度來捕捉，讓素材在 HoloLens 上播放時看起來很簡潔，而且攝影機必須放置在一起，才能將裝訂成品降至最低。</span><span class="sxs-lookup"><span data-stu-id="bd482-116">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="bd482-117">我們想要完全有球形的範圍，而不是在範圍內，但在您的上方和下方。</span><span class="sxs-lookup"><span data-stu-id="bd482-117">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="bd482-118">Rig 也必須是可移植的，才能讓我們在世界各地。</span><span class="sxs-lookup"><span data-stu-id="bd482-118">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="bd482-119">我們評估了現成可用的選項，併發現它們沒有足夠的能力來實現我們的願景，可能是因為解析度、成本或大小。</span><span class="sxs-lookup"><span data-stu-id="bd482-119">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="bd482-120">如果找不到符合需求的攝影機 rig，則必須自行建立。</span><span class="sxs-lookup"><span data-stu-id="bd482-120">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="bd482-121">建立 rig</span><span class="sxs-lookup"><span data-stu-id="bd482-121">Building the rig</span></span>

<span data-ttu-id="bd482-122">第一個版本（從紙箱、Velcro、管道磁帶和14個 GoPro 攝影機）是 MacGyver 很榮幸的東西。</span><span class="sxs-lookup"><span data-stu-id="bd482-122">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="bd482-123">從低端解決方案到自訂製造的 rig 進行審核之後，GoPro 攝影機最終是最適合我們的選擇，因為它們很小、價格實惠，而且具有容易使用的記憶體儲存體。</span><span class="sxs-lookup"><span data-stu-id="bd482-123">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="bd482-124">小型外型規格特別重要，因為它可讓我們將相機保持在一起，而相機之間的距離越小，則裝訂成品就越小。</span><span class="sxs-lookup"><span data-stu-id="bd482-124">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="bd482-125">我們獨特的攝影機相片順序可讓我們取得完整的球體涵蓋範圍， *再加上* 足夠的重迭，以智慧地對齊攝影機，並在進行拼接程式時使某些成品順暢</span><span class="sxs-lookup"><span data-stu-id="bd482-125">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="bd482-126">利用 HoloLens 的 [空間音效](../design/spatial-sound.md) 功能，對於創造 convincingly 的真正沉浸式體驗非常重要。</span><span class="sxs-lookup"><span data-stu-id="bd482-126">Taking advantage of the [spatial sound](../design/spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="bd482-127">我們使用了四個麥克風的陣列，其位於您的攝影機下，這會以四個方向從相機的位置捕捉音效，提供足夠的資訊讓我們在幕後建立空間音效。</span><span class="sxs-lookup"><span data-stu-id="bd482-127">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![我們的360°攝影機設備是針對 Pantheon 以外的 filming 進行設定。](images/camera-pantheon-200px.png)

<span data-ttu-id="bd482-129">我們的360°攝影機設備是針對 Pantheon 以外的 filming 進行設定。</span><span class="sxs-lookup"><span data-stu-id="bd482-129">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="bd482-130">我們已將自製的測試人員帶到 Rattlesnake 附近的凸緣來進行測試，並在走去加加頂端取得景象。</span><span class="sxs-lookup"><span data-stu-id="bd482-130">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="bd482-131">結果雖然比您今天在 HoloTour 中所看到的位置明顯較不完善，但讓我們相信您的 rig 設計很有説明，讓您覺得您真的很滿意。</span><span class="sxs-lookup"><span data-stu-id="bd482-131">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="bd482-132">我們已將 Velcro 和紙箱的 rig 升級為3D 列印的攝影機，並購買 GoPro 攝影機的外部電池套件，以簡化電池管理。</span><span class="sxs-lookup"><span data-stu-id="bd482-132">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="bd482-133">接著，我們進行了更廣泛的測試，向下移動至三藩市，以建立城市的 coast 和 iconic 黃金閘道的縮圖。</span><span class="sxs-lookup"><span data-stu-id="bd482-133">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="bd482-134">這是我們在 HoloTour 中流覽的大部分位置所使用的相機 rig。</span><span class="sxs-lookup"><span data-stu-id="bd482-134">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![Machu Picchu 中的360°攝影機 rig filming。](images/camera-machu-pichu-500px.png)

<span data-ttu-id="bd482-136">Machu Picchu 中的360°攝影機 rig filming。</span><span class="sxs-lookup"><span data-stu-id="bd482-136">The 360° camera rig filming in Machu Picchu.</span></span> 

## <a name="behind-the-scenes"></a><span data-ttu-id="bd482-137">在幕後</span><span class="sxs-lookup"><span data-stu-id="bd482-137">Behind the scenes</span></span>

<span data-ttu-id="bd482-138">在 filming 之前，我們需要找出我們想要包含在虛擬導覽上的位置。</span><span class="sxs-lookup"><span data-stu-id="bd482-138">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="bd482-139">羅馬是我們打算寄出的第一個位置，我們想要讓它正確，因此我們決定事先進行 scouting 行程。</span><span class="sxs-lookup"><span data-stu-id="bd482-139">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="bd482-140">我們傳送了六名人員（包括演出者、設計師和生產者）的團隊，讓他們親自造訪我們所考慮的網站。</span><span class="sxs-lookup"><span data-stu-id="bd482-140">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="bd482-141">旅程大約需要9天–2.5 用於旅遊，filming 的其餘部分。</span><span class="sxs-lookup"><span data-stu-id="bd482-141">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="bd482-142"> (針對 Machu Picchu，我們選擇不要進行 scout 行程，事先研究並預約幾天的緩衝區以進行 filming。 ) </span><span class="sxs-lookup"><span data-stu-id="bd482-142">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="bd482-143">在羅馬期間，小組會取得每個區域的相片，並記下有趣的事實，以及實際的考慮，例如，移動到每個位置的困難度，以及因 crowds 或限制而造成的電影。</span><span class="sxs-lookup"><span data-stu-id="bd482-143">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="bd482-144">這聽起來可能像度假，但其實有很多工作。</span><span class="sxs-lookup"><span data-stu-id="bd482-144">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="bd482-145">早上早上開始使用，並不會停止，直到夜晚。</span><span class="sxs-lookup"><span data-stu-id="bd482-145">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="bd482-146">每晚上傳一份素材，讓小組回到西雅圖進行評論。</span><span class="sxs-lookup"><span data-stu-id="bd482-146">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![我們的「我們的捕獲」是以羅馬。](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="bd482-148">我們的「我們的捕獲」是以羅馬。</span><span class="sxs-lookup"><span data-stu-id="bd482-148">Our capture crew in Rome.</span></span> 


<span data-ttu-id="bd482-149">Scout 行程完成之後，就會針對實際 filming 進行最終的計畫。</span><span class="sxs-lookup"><span data-stu-id="bd482-149">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="bd482-150">這需要一個詳細的清單，說明我們要在哪一天、哪些時候，以及在什麼時候的電影。</span><span class="sxs-lookup"><span data-stu-id="bd482-150">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="bd482-151">每日海外都很昂貴，因此這些旅程需要很有效率。</span><span class="sxs-lookup"><span data-stu-id="bd482-151">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="bd482-152">我們在羅馬中預訂了輔助線和處理常式，可協助我們在每日從日出到終止之後，都能完全使用。</span><span class="sxs-lookup"><span data-stu-id="bd482-152">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="bd482-153">我們需要取得最佳的鏡頭，才能讓您覺得真正的樣子。</span><span class="sxs-lookup"><span data-stu-id="bd482-153">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="bd482-154">捕獲影片</span><span class="sxs-lookup"><span data-stu-id="bd482-154">Capturing the video</span></span>

<span data-ttu-id="bd482-155">在 capture 期間進行一些簡單的作業，可讓後續處理作業更容易。</span><span class="sxs-lookup"><span data-stu-id="bd482-155">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="bd482-156">例如，當您將多個相機的影像結合在一起時，您最後會得到視覺構件，因為每個相機的觀點都稍微不同。</span><span class="sxs-lookup"><span data-stu-id="bd482-156">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="bd482-157">較接近的物件是相機、視圖之間的差異越大，以及裝訂成品將會變大。</span><span class="sxs-lookup"><span data-stu-id="bd482-157">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="bd482-158">以下是將問題視覺化的簡單方式：將您的 thumb 放在臉部前方，並只查看一眼。</span><span class="sxs-lookup"><span data-stu-id="bd482-158">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="bd482-159">立即切換眼睛。</span><span class="sxs-lookup"><span data-stu-id="bd482-159">Now switch eyes.</span></span> <span data-ttu-id="bd482-160">您會看到您的 thumb 顯示為相對於背景的移動。</span><span class="sxs-lookup"><span data-stu-id="bd482-160">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="bd482-161">如果您的臉部更遠離開您的臉部，並重複實驗，那麼您的 thumb 將會變得更少。</span><span class="sxs-lookup"><span data-stu-id="bd482-161">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="bd482-162">這種明顯的移動類似于我們所面臨的拼接問題：您的眼睛（像是攝影機）看不到完全相同的影像，因為它們是以短距離隔開。</span><span class="sxs-lookup"><span data-stu-id="bd482-162">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="bd482-163">因為在 filming 時可以更輕鬆地預防最糟的成品，而不是在後置處理中加以修正，因此我們會嘗試讓其他人和專案遠離相機，而不需要將特寫物件拼接在一起。</span><span class="sxs-lookup"><span data-stu-id="bd482-163">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="bd482-164">在我們的過程中維持大規模清除，是我們在進行診斷時最大的挑戰之一，而我們必須有創意才能讓它運作。</span><span class="sxs-lookup"><span data-stu-id="bd482-164">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="bd482-165">使用本機指南對於管理 crowds 有很大的説明，但我們也發現，使用正負號（有時是小型的圓錐或 bean 包）來標示 filming 空間相當有效，尤其是因為我們只需要在每個位置取得少量的素材。</span><span class="sxs-lookup"><span data-stu-id="bd482-165">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="bd482-166">取得良好的捕獲通常是在早上很早抵達的最佳方式，在大部分的人顯示之前都是如此。</span><span class="sxs-lookup"><span data-stu-id="bd482-166">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="bd482-167">還有一些其他有用的捕獲技巧，直接來自傳統的電影實務。</span><span class="sxs-lookup"><span data-stu-id="bd482-167">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="bd482-168">例如，我們在所有的相機上都使用了顏色更正卡，並在稍後取得材質和物件的參考相片。</span><span class="sxs-lookup"><span data-stu-id="bd482-168">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![顯示色彩校正卡的 Machu Picchu 粗略剪下。](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="bd482-170">Pantheon 素材在進行裝訂之前的粗略剪下。</span><span class="sxs-lookup"><span data-stu-id="bd482-170">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="bd482-171">處理影片</span><span class="sxs-lookup"><span data-stu-id="bd482-171">Processing the video</span></span>

<span data-ttu-id="bd482-172">捕捉360的內容只是第一個步驟：需要進行大量處理，才能將我們所捕獲的原始攝影機素材轉換成您在 HoloTour 中看到的最終資產。</span><span class="sxs-lookup"><span data-stu-id="bd482-172">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="bd482-173">離開後，我們需要從14個不同的相機摘要中拍攝影片，並將其轉換成具有最少量構件的單一持續影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-173">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="bd482-174">我們的藝術團隊使用許多工具來結合和波蘭文已捕捉的影片，而我們開發了管線，盡可能將處理優化。</span><span class="sxs-lookup"><span data-stu-id="bd482-174">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="bd482-175">您必須將這種素材拼接在一起、校正色彩，然後再加以組合，以移除雜亂的元素和成品，或是新增生命和運動的補充隨身，其目標是要加強實際效果。</span><span class="sxs-lookup"><span data-stu-id="bd482-175">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![Pantheon 素材在進行裝訂之前的粗略剪下。](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="bd482-177">Pantheon 素材在進行裝訂之前的粗略剪下。</span><span class="sxs-lookup"><span data-stu-id="bd482-177">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="bd482-178">為了將影片結合在一起，我們使用了稱為 [PTGui](https://www.ptgui.com/) 的工具，並將它整合到我們的處理管線中。</span><span class="sxs-lookup"><span data-stu-id="bd482-178">To stitch the videos together, we used a tool called [PTGui](https://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="bd482-179">在後置處理過程中，我們從影片中解壓縮的是畫面格，並找到針對其中一個畫面格看起來很不錯的拼接圖樣。</span><span class="sxs-lookup"><span data-stu-id="bd482-179">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="bd482-180">接著，我們會將該模式套用至我們所撰寫的自訂外掛程式，讓我們的視頻演出者可以在效果過之後，直接微調及調整拼接圖樣。</span><span class="sxs-lookup"><span data-stu-id="bd482-180">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![PTGui 的螢幕擷取畫面，其中顯示拼接 Pantheon 的素材。](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="bd482-182">PTGui 的螢幕擷取畫面，其中顯示拼接 Pantheon 的素材。</span><span class="sxs-lookup"><span data-stu-id="bd482-182">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="bd482-183">影片播放</span><span class="sxs-lookup"><span data-stu-id="bd482-183">Video playback</span></span>

<span data-ttu-id="bd482-184">在處理完素材之後，我們有一段流暢的影片，但其實很大，大約是8K 的解析度。</span><span class="sxs-lookup"><span data-stu-id="bd482-184">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="bd482-185">解碼影片的成本很高，而且有很少的電腦可以處理8K 的影片，因此下一項挑戰就是尋找在 HoloLens 上播放這部影片的途徑。</span><span class="sxs-lookup"><span data-stu-id="bd482-185">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="bd482-186">我們開發了一些策略來避免解碼的成本，但仍讓使用者感覺像是觀看整段影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-186">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="bd482-187">最簡單的優化是避免解碼部分不會變得太大的影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-187">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="bd482-188">我們撰寫了一個工具來識別每個場景中幾乎沒有任何動作的區域。</span><span class="sxs-lookup"><span data-stu-id="bd482-188">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="bd482-189">針對這些區域，我們會顯示靜態影像，而不是在每個框架中解碼影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-189">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="bd482-190">為了達成這一點，我們將大量的影片分成更小的區塊。</span><span class="sxs-lookup"><span data-stu-id="bd482-190">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="bd482-191">我們也會確定我們解碼的每個圖元都是最有效率的使用方式。</span><span class="sxs-lookup"><span data-stu-id="bd482-191">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="bd482-192">我們實驗了壓縮技術來降低影片的大小;我們會根據所投射幾何的多邊形來分割影片區域;我們調整了 UVs，並根據包含的不同多邊形詳細資料來 repacked 影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-192">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="bd482-193">這項工作的結果，是以單一8k 影片的形式啟動，而這段影片在正確地重新投射到場景之前，會一直看起來幾乎無法理解。</span><span class="sxs-lookup"><span data-stu-id="bd482-193">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="bd482-194">針對瞭解材質對應和 UV 封裝的遊戲開發人員，這可能看起來很熟悉。</span><span class="sxs-lookup"><span data-stu-id="bd482-194">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![優化之前的 Pantheon 完整觀點。](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="bd482-196">優化之前的 Pantheon 完整觀點。</span><span class="sxs-lookup"><span data-stu-id="bd482-196">A full view of the Pantheon before optimizations.</span></span> 


![Pantheon 的上半部，處理影片播放。](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="bd482-198">Pantheon 的上半部，處理影片播放。</span><span class="sxs-lookup"><span data-stu-id="bd482-198">The right half of the Pantheon, processed for video playback.</span></span> 


![優化和封裝之後的單一影片區域範例。](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="bd482-200">優化和封裝之後的單一影片區域範例。</span><span class="sxs-lookup"><span data-stu-id="bd482-200">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="bd482-201">我們使用的另一種技巧是避免解碼您未主動觀賞的影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-201">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="bd482-202">在 HoloTour 中，您在任何指定的時間都只能看到一部分的完整場景。</span><span class="sxs-lookup"><span data-stu-id="bd482-202">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="bd482-203">我們只會在您的視野 (FOV) 的內部或不久之外解碼影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-203">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="bd482-204">當您旋轉頭部時，我們會開始播放影片中現在位於 FOV 中的區域，並停止播放不再存在的影片中。</span><span class="sxs-lookup"><span data-stu-id="bd482-204">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="bd482-205">大部分的人都不會注意到這種情況，但如果您很快就會看到影片，您會看到影片需要一秒鐘的時間才能開始，此時您會看到一個靜態影像，當它準備好後，就會淡回影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-205">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="bd482-206">為了讓此策略運作，我們開發了大量的影片播放系統。</span><span class="sxs-lookup"><span data-stu-id="bd482-206">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="bd482-207">我們已優化低層級的播放程式碼，讓影片切換變得非常有效率。</span><span class="sxs-lookup"><span data-stu-id="bd482-207">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="bd482-208">此外，我們必須以特殊方式編碼我們的影片，讓您隨時都能快速切換到任何影片。</span><span class="sxs-lookup"><span data-stu-id="bd482-208">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="bd482-209">這種播放管線花費大量的開發時間，因此我們會分階段執行。</span><span class="sxs-lookup"><span data-stu-id="bd482-209">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="bd482-210">我們開始使用較簡單的系統，它的效率較低，但允許的設計人員和演出者可以使用此體驗，並讓我們以更健全的播放系統（可讓我們在最終品質列）提供更佳的改進。</span><span class="sxs-lookup"><span data-stu-id="bd482-210">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="bd482-211">此最終系統擁有在 Unity 中建立的自訂工具，可在場景內設定影片並監視播放引擎。</span><span class="sxs-lookup"><span data-stu-id="bd482-211">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="bd482-212">在3D 中重建近空間物件</span><span class="sxs-lookup"><span data-stu-id="bd482-212">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="bd482-213">影片會構成您在 HoloTour 中所看到的大部分內容，但是有一些與您相近的3D 物件，例如 Piazza Navona 中的繪圖、Pantheon 外的 fountain，或您針對排氣場景所參與的熱空氣球。</span><span class="sxs-lookup"><span data-stu-id="bd482-213">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="bd482-214">這些3D 物件很重要，因為人類深度感知非常好用，但不太理想。</span><span class="sxs-lookup"><span data-stu-id="bd482-214">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="bd482-215">我們可以在距離中找出影片，但為了讓使用者可以四處四處看看他們的空間，而鄰近的物件則需要深度。</span><span class="sxs-lookup"><span data-stu-id="bd482-215">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="bd482-216">這項技術與您可能會在自然歷程記錄博物館中看到的一樣，也就是在前景中有實體造景、工廠和動物 specimens 的 diorama，但 recedes 在背景中以巧妙地遮罩遮罩的方式繪製。</span><span class="sxs-lookup"><span data-stu-id="bd482-216">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="bd482-217">有些物件就是我們建立並新增至場景的3D 資產，以增強體驗。</span><span class="sxs-lookup"><span data-stu-id="bd482-217">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="bd482-218">繪製和熱的氣球會落在這個類別中，因為我們在 filmed 時並不存在。</span><span class="sxs-lookup"><span data-stu-id="bd482-218">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="bd482-219">與遊戲資產類似，它們是由小組的3D 演出者所建立，並有適當的紋理。</span><span class="sxs-lookup"><span data-stu-id="bd482-219">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="bd482-220">我們將這些放在幕後的地方，而遊戲引擎可以將它們轉譯成兩個 HoloLens 顯示器，讓它們顯示為3D 物件。</span><span class="sxs-lookup"><span data-stu-id="bd482-220">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="bd482-221">其他資產（例如 Pantheon 以外的 fountain）是存在於我們即將推出影片之位置中的真實物件，但若要將這些物件從影片中移出，並將這些物件放在影片中，我們必須執行一些動作。</span><span class="sxs-lookup"><span data-stu-id="bd482-221">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="bd482-222">首先，我們需要有關每個物件的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="bd482-222">First, we need additional information about each object.</span></span> <span data-ttu-id="bd482-223">在 filming 的位置，我們的團隊會為這些物件捕捉許多參考圖，讓我們有足夠的詳細影像來精確地重新建立紋理。</span><span class="sxs-lookup"><span data-stu-id="bd482-223">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="bd482-224">小組也執行了 [攝影測量](https://en.wikipedia.org/wiki/Photogrammetry) 掃描，它會從數十個2d 影像中建立3d 模型，讓我們以完美的比例提供物件的粗略模型。</span><span class="sxs-lookup"><span data-stu-id="bd482-224">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="bd482-225">當我們處理我們的影片時，將會從影片中移除以3D 標記法之後將取代的物件。</span><span class="sxs-lookup"><span data-stu-id="bd482-225">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="bd482-226">3D 資產是以攝影測量模型為基礎，但我們的演出者會加以清除和簡化。</span><span class="sxs-lookup"><span data-stu-id="bd482-226">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="bd482-227">對於某些物件而言，我們可以使用影片的元件（例如 fountain 上的水材質），但大部分的 fountain 現在都是3D 物件，可讓使用者在體驗的有限空間中觀察深度並加以解說。</span><span class="sxs-lookup"><span data-stu-id="bd482-227">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="bd482-228">有接近空間的物件（例如這樣）會大幅增加其真實性的意義，並有助於將虛擬位置的使用者接地。</span><span class="sxs-lookup"><span data-stu-id="bd482-228">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![已移除 fountain 的 Pantheon 素材。](images/object-removal-pantheon-500px.png)

<span data-ttu-id="bd482-231">已移除 fountain 的 Pantheon 素材。</span><span class="sxs-lookup"><span data-stu-id="bd482-231">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="bd482-232">它會以3D 資產取代。</span><span class="sxs-lookup"><span data-stu-id="bd482-232">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="bd482-233">最後的想法</span><span class="sxs-lookup"><span data-stu-id="bd482-233">Final thoughts</span></span>

<span data-ttu-id="bd482-234">很明顯地，建立此內容比我們在這裡所討論的還多。</span><span class="sxs-lookup"><span data-stu-id="bd482-234">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="bd482-235">有幾個場景，我們想要將它們稱為「不可能的觀點」，包括熱的氣球，以及 Colosseum 中的 gladiator 打擊，以採取更具創意的方式。</span><span class="sxs-lookup"><span data-stu-id="bd482-235">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="bd482-236">我們將在未來的案例研究中解決這些情況。</span><span class="sxs-lookup"><span data-stu-id="bd482-236">We'll address these in a future case study.</span></span>

<span data-ttu-id="bd482-237">我們希望在生產期間共用的一些較大挑戰的解決方案，對其他開發人員很有説明，而且您也會想要使用其中一些技巧來為 HoloLens 建立您自己的沉浸式體驗。</span><span class="sxs-lookup"><span data-stu-id="bd482-237">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="bd482-238"> (如果您這樣做，請務必在 [HoloLens 應用程式開發論壇](https://forums.hololens.com/)中與我們分享！ ) </span><span class="sxs-lookup"><span data-stu-id="bd482-238">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="bd482-239">關於作者</span><span class="sxs-lookup"><span data-stu-id="bd482-239">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bd482-240"><b>David Haley</b> 是一位資深開發人員，他們學到更多有關相機 rig 和影片播放的資訊，而不是他想像過 HoloTour。</span><span class="sxs-lookup"><span data-stu-id="bd482-240"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bd482-241"><b>Danny Askew</b> 是一位影片演出者，可確保您的羅馬進度盡可能完美。</span><span class="sxs-lookup"><span data-stu-id="bd482-241"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bd482-242"><b>Jason Syltebo</b> 是一種音訊設計工具，可確保您可以體驗您所造訪之每個目的地的 soundscape，即使您回頭回來也是如此。</span><span class="sxs-lookup"><span data-stu-id="bd482-242"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="bd482-243"><b>Travis Steiner</b> 是一位設計主管，負責研究和 scouted 地點、建立旅程計畫，以及在現場導向 filming。</span><span class="sxs-lookup"><span data-stu-id="bd482-243"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="bd482-244">另請參閱</span><span class="sxs-lookup"><span data-stu-id="bd482-244">See also</span></span>
* [<span data-ttu-id="bd482-245">影片： Microsoft HoloLens： HoloTour</span><span class="sxs-lookup"><span data-stu-id="bd482-245">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
